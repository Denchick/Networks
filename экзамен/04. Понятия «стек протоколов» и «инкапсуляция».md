# 04. Понятия «стек протоколов» и «инкапсуляция»

Для решения сложной задачи построения крупной составной сети используется декомпозиция ее на уровни. Но здесь возникает ряд вопросов:

- Сколько уровней должно быть в сети?
- Какие уровни должны быть в сети?
- Какие функции должны выполняться и на каком уровне?

Это все определяется __Архитектурой сети__, которая задает наборы уровней и протоколов сети. 

> Обратите внимание, что __интерфейсы в архитектуру не входят__! Они могут быть разными на разных программных платформах.

Другое важное понятие - __Стек протоколов__ - иерархически организованный набор протоколов, достаточный для организации взаимодействия по сети. 

Можно придумать большое количество архитектур сети, которые будут хороши для решения конкретной задачи, но если мы хотим строить крупные сети, необходимо соблюдать стандарты организации сетей - __Эталлонные модели организации сетей__.

### Эталонные модели организации сетей

1. __Модель взаимодействия открытых систем (ISO OSI)__
   - Юридический стандарт международной организации стандартизации ISO
   - 7 уровней, протоколы не входят в модель
   - Хорошая теоретическая проработка
   - На практике не используется
2. __Модель TCP/IP__
   - Фактический стандарт на основе популярного стека протоколов TCP/IP
   - 4 уровня
   - Протоколы TCP/IP широко используются на практике
   - Основа интернета

### Икапсуляция

Еще одно важное понятие в организации работы сетей.

__Инкапсуляция__ - включение сообщения вышестоящего уровня в сообщение нижестоящего уровня.

__Сообщение__ представляет собой совокупность

>  заголовок +данные + концевик.

- __Заголовок блока данных__ - начальная часть блока данных, в которой указываются сведения, необходимые для передачи блока: _сигнал начала блока, номер блока, его размер, адреса отправления и назначения_.
- __Концевик блока данных__ - необязательная замыкающая часть блока данных, содержащая контрольную сумму или другие данные для контроля правильности передачи.

Виртуальное общение между уровнями осуществляется посредством заголовков
сообщений. Каждый уровень добавляет к сообщению свой собственный заголовок в порядке “сверху вниз”, а затем, сообщение считывается на другой хост машине в обратном порядке.